!function(){"use strict";const body=document.querySelector("body"),nav=document.querySelector("#nav"),navToggle=document.querySelector('a[href="#nav"]'),navClose=document.querySelector("#nav .close"),backToTop=document.querySelector("#backtotop");window.addEventListener("load",(function(){body.classList.remove("is-loading"),body.classList.remove("trans")}));let hideNav=function(){nav.classList.remove("visible"),body.classList.remove("menu-visible")},toggleNav=function(){nav.classList.toggle("visible"),body.classList.toggle("menu-visible")},hideCart=function(){cart.classList.remove("visible"),body.classList.remove("menu-visible")},toggleCart=function(){cart.classList.toggle("visible"),body.classList.toggle("menu-visible")};body.addEventListener("click",(function(e){body.classList.contains("menu-visible")&&(e.preventDefault(),e.stopPropagation(),hideNav())}),!1),nav.addEventListener("click",(function(e){e.stopPropagation()}),!1),navToggle.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),toggleNav()}),!1),navClose.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),hideNav()}),!1);let transition=function(e){let href=this.getAttribute("href"),target=this.getAttribute("target");href&&-1==href.indexOf("#")&&-1==href.indexOf("tel")&&-1==href.indexOf("wa.me")&&-1==href.indexOf("mailto")&&"_blank"!=target&&(e.preventDefault(),e.stopPropagation(),hideNav(),hideCart(),body.classList.add("trans"),window.setTimeout((function(){window.location.href=href,console.log("250")}),250))};body.addEventListener("click",(function(e){for(let target=e.target;target&&target!=this;target=target.parentNode)if(target.matches("a")){transition.call(target,e);break}}),!1),nav.addEventListener("click",(function(e){for(let target=e.target;target&&target!=this;target=target.parentNode)if(target.matches("a")){transition.call(target,e);break}}),!1),window.addEventListener("pageshow",(function(event){!0===event.persisted&&body.classList.remove("trans")}),!1),backToTop&&backToTop.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),body.scrollIntoView(!0,{behavior:"smooth"})}),!1);const form_wrapper=document.querySelector(".form-wrapper"),form=document.querySelector(".ajax-form");form.addEventListener("submit",(function(e){e.preventDefault();const url="https://notstupidapp.ew.r.appspot.com/shopapi/v2/porolonych",form_loading=this.parentNode.querySelector(".form-loading"),form_success=this.parentNode.querySelector(".form-success"),form_error=this.parentNode.querySelector(".form-error"),payload={name:this.elements.name.value,email:this.elements.email.value,phone:this.elements.phone.value,shipping:this.elements.shipping.value,message:this.elements.message.value,cart_sum:this.elements.cartstring.value,cart:cartApi.listCart()};this.classList.add("hide"),form_loading.classList.remove("hide"),form_loading.classList.add("fade-in");let request=new XMLHttpRequest;request.open("POST",url),request.onload=function(){if(this.status>=200&&this.status<400){try{yaCounter15918124.reachGoal("order")}catch(error){console.error(error)}console.log("Success"),console.log(this.responseText),form_loading.classList.add("hide"),form_success.classList.remove("hide"),form_success.classList.add("fade-in"),cartApi.clearCart(),displayCart(),updateCounts()}else console.log("Server returned error"),form_loading.classList.add("hide"),form_error.classList.remove("hide"),form_error.classList.add("fade-in")},request.onerror=function(){console.log("Connection error"),form_loading.classList.add("hide"),form_error.classList.remove("hide"),form_error.classList.add("fade-in")},request.send(JSON.stringify(payload))}),!1)}();